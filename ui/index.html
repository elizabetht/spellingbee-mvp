<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SpellingBee</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <!-- ── Header ── -->
  <header>
    <div class="logo">&#x1F41D; SpellingBee</div>
    <div id="scoreBar" class="score-bar hidden">
      <span class="score-label">Score</span>
      <span id="score" class="score-value">0 / 0</span>
      <span id="progress" class="progress-pill"></span>
    </div>
  </header>

  <main>
    <!-- ── Stage: Setup ── -->
    <section id="stageSetup" class="stage fade-in">
      <div class="hero-text">
        <h1>Ready to practice?</h1>
        <p class="subtitle">Upload a word-list photo or try a demo list.</p>
      </div>

      <label for="img" class="upload-zone" id="uploadZone">
        <span class="upload-icon">&#x1F4F7;</span>
        <span class="upload-text">Tap to upload word list image</span>
        <input id="img" type="file" accept="image/*" />
      </label>

      <div class="btn-row">
        <button class="btn primary" id="btnExtract">Extract Words</button>
        <button class="btn outline" id="btnDemoList">Demo List</button>
      </div>
      <p id="extractStatus" class="status-msg"></p>

      <div id="wordEditor" class="word-editor hidden">
        <div class="word-count" id="wordCount"></div>
        <textarea id="wordsBox" placeholder="One word per line&#8230;"></textarea>
        <div class="btn-row">
          <button class="btn accent large" id="btnStartSession">&#x25B6; Start Practice</button>
        </div>
      </div>
    </section>

    <!-- ── Stage: Active session ── -->
    <section id="stageSession" class="stage hidden">
      <!-- Prompt card -->
      <div class="prompt-card">
        <span class="prompt-label">Spell this word</span>
        <button class="btn icon" id="btnSpeakPrompt" title="Hear the word again">&#x1F50A;</button>
      </div>

      <!-- Listening ring -->
      <div class="listen-area">
        <div id="listenRing" class="listen-ring idle">
          <span id="listenIcon" class="listen-emoji">&#x1F3A4;</span>
        </div>
        <p id="listenStatus" class="listen-status">Tap &#x25B6; to begin</p>
        <div id="liveTranscript" class="live-transcript"></div>
      </div>

      <!-- Result -->
      <div id="resultArea" class="result-area hidden">
        <div id="resultBadge" class="result-badge"></div>
        <p id="resultLetters" class="result-letters"></p>
        <p id="feedback" class="feedback-text"></p>
        <button class="btn icon small" id="btnSpeakFeedback" title="Hear feedback">&#x1F50A;</button>
      </div>

      <!-- Main action buttons -->
      <div class="action-row">
        <button class="btn accent large pulse" id="btnHandsFree">&#x25B6; Start</button>
        <button class="btn danger large hidden" id="btnHFStop">&#x23F9; Stop</button>
      </div>

      <!-- Manual fallback (collapsed) -->
      <details class="manual-section">
        <summary>Manual mode</summary>
        <div class="manual-inner">
          <div class="btn-row">
            <button class="btn" id="btnRecStart">&#x23FA; Record</button>
            <button class="btn" id="btnRecStop" disabled>&#x23F9; Stop</button>
            <button class="btn primary" id="btnSubmit" disabled>Submit</button>
          </div>
          <input id="transcript" type="text" placeholder="Or type letters here&#8230;" class="text-input" />
        </div>
      </details>

      <div class="session-footer">
        <button class="btn ghost small" id="btnEditList">&#x2190; Change Words</button>
      </div>
    </section>

    <!-- ── Stage: Done ── -->
    <section id="stageDone" class="stage hidden">
      <div class="done-card fade-in">
        <div class="done-emoji">&#x1F389;</div>
        <h2>Amazing work!</h2>
        <p id="finalScore" class="final-score"></p>
        <button class="btn accent large" id="btnRestart">Practice Again</button>
      </div>
    </section>
  </main>

  <script src="/app.js"></script>
</body>
</html>
